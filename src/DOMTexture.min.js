"use strict";(function(){if(!THREE){throw new Error("DOM Texture requires three.js")}var a=getComputedStyle(document.body).cssText!=="";function c(g){var e=getComputedStyle(g);if(a){g.style.cssText=e.cssText}else{for(var f in e){var h=e[f];if(isNaN(f*1)&&typeof h!=="function"&&!(/^(cssText|length|parentRule)$/).test(f)){g.style[f]=h}}}}var d=function(j){j=Object.assign({width:512,height:512,content:null},j);var i=document.createElement("canvas");i.width=j.width;i.height=j.height;var h=document.createElement("svg");h.setAttribute("xmlns","http://www.w3.org/2000/svg");h.setAttribute("width",j.width);h.setAttribute("height",j.height);var g=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");g.setAttribute("width","100%");g.setAttribute("height","100%");var k=document.createElement("div");k.setAttribute("xmlns","http://www.w3.org/1999/xhtml");k.innerText="__content__";g.appendChild(k);h.appendChild(g);var f=document.createElement("img");f.onload=(function(){this.ctx.clearRect(0,0,this.width,this.height);this.ctx.drawImage(f,0,0);if(typeof this.renderComplete==="function"){this.renderComplete()}}).bind(this);var e=new FileReader();e.onloadend=function(){f.src=e.result};this.DOMURL=window.URL||window.webkitURL||window;this.canvas=i;this.ctx=i.getContext("2d");this.svg=h;this.img=f;this.reader=e;this.renderComplete=j.renderComplete;this.width=j.width;this.height=j.height;this.content=j.content};d.prototype={constructor:d,setWidth:function(e){if(typeof e==="number"){this.width=e;this.canvas.width=e;this.svg.setAttribute("width",e)}return this},setHeight:function(e){if(typeof e==="number"){this.height=e;this.canvas.height=e;this.svg.setAttribute("height",e)}return this},setContent:function(e){this.content=e;return this},setRenderComplete:function(e){this.renderComplete=e;return this},contentInlineStyle:function(){if(this.content instanceof Element){var e=this.content;c(e);e.querySelectorAll("*").forEach(c)}return this},render:function(f){if(!f){f=this.content}var g="";if(typeof f==="string"){g=f}else{if(f instanceof Element){g=f.outerHTML}}var h=this.svg.outerHTML.replace("__content__",g);var e=new Blob([h],{type:"image/svg+xml;charset=utf-8"});this.reader.readAsDataURL(e)}};var b=function(o,f,j,i,n,g,m,l,e,h){var k=new d(o);k.setRenderComplete((function(){this.version++}).bind(this));THREE.Texture.call(this,k.canvas,f,j,i,n,g,m,l,e,h);this.domCanvas=k;Object.defineProperty(this,"needsUpdate",{set:function(p){if(p===true){k.render()}}})};b.prototype=Object.assign(Object.create(THREE.Texture.prototype),{constructor:b,setWidth:function(e){this.domCanvas.setWidth(e)},setHeight:function(e){this.domCanvas.setHeight(e)},setContent:function(e){this.domCanvas.setContent(e)},domInlineStyle:function(){this.domCanvas.contentInlineStyle()}});THREE.DOMCanvas=d;THREE.DOMTexture=b})();